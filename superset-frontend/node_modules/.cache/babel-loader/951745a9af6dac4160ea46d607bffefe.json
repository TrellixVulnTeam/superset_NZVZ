{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport {\ninitFeatureFlags,\nisFeatureEnabled,\nFeatureFlag } from\n'src/featureFlags';\n\nfunction getDomainsConfig() {var _bootstrapData$common;\n  const appContainer = document.getElementById('app');\n  if (!appContainer) {\n    return [];\n  }\n\n  const bootstrapData = JSON.parse(appContainer.getAttribute('data-bootstrap'));\n  // this module is a little special, it may be loaded before index.jsx,\n  // where window.featureFlags get initialized\n  // eslint-disable-next-line camelcase\n  initFeatureFlags(bootstrapData == null ? void 0 : (_bootstrapData$common = bootstrapData.common) == null ? void 0 : _bootstrapData$common.feature_flags);\n  const availableDomains = new Set([window.location.hostname]);\n  if (\n  isFeatureEnabled(FeatureFlag.ALLOW_DASHBOARD_DOMAIN_SHARDING) &&\n  bootstrapData &&\n  bootstrapData.common &&\n  bootstrapData.common.conf &&\n  bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS)\n  {\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach((hostName) => {\n      availableDomains.add(hostName);\n    });\n  }\n  return Array.from(availableDomains);\n}\n\nexport const availableDomains = getDomainsConfig();\n\nexport const allowCrossDomain = availableDomains.length > 1;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getDomainsConfig, \"getDomainsConfig\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");reactHotLoader.register(availableDomains, \"availableDomains\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");reactHotLoader.register(allowCrossDomain, \"allowCrossDomain\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(__signature__, \"__signature__\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");reactHotLoader.register(getDomainsConfig, \"getDomainsConfig\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");reactHotLoader.register(availableDomains, \"availableDomains\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");reactHotLoader.register(allowCrossDomain, \"allowCrossDomain\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/hostNamesConfig.js"],"names":["getDomainsConfig","appContainer","document","bootstrapData","JSON","initFeatureFlags","availableDomains","window","isFeatureEnabled","FeatureFlag","Array","allowCrossDomain"],"mappings":"+kBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,gBAAA;AAAA,gBAAA;AAAA,WAAA;AAAA,kBAAA;;AAMA,SAAA,gBAAA,GAA4B,CAAA,IAAA,qBAAA;AAC1B,QAAMC,YAAY,GAAGC,QAAQ,CAARA,cAAAA,CAArB,KAAqBA,CAArB;AACA,MAAI,CAAJ,YAAA,EAAmB;AACjB,WAAA,EAAA;AACD;;AAED,QAAMC,aAAa,GAAGC,IAAI,CAAJA,KAAAA,CAAWH,YAAY,CAAZA,YAAAA,CAAjC,gBAAiCA,CAAXG,CAAtB;AACA;AACA;AACA;AACAC,EAAAA,gBAAgB,CAACF,aAAD,IAAA,IAACA,GAAD,KAAA,CAACA,GAAD,CAAA,qBAAA,GAACA,aAAa,CAAd,MAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAACA,qBAAAA,CAAjBE,aAAgB,CAAhBA;AACA,QAAMC,gBAAgB,GAAG,IAAA,GAAA,CAAQ,CAACC,MAAM,CAANA,QAAAA,CAAlC,QAAiC,CAAR,CAAzB;AACA;AACEC,EAAAA,gBAAgB,CAACC,WAAW,CAA5BD,+BAAgB,CAAhBA;AAAAA,EAAAA,aAAAA;AAEAL,EAAAA,aAAa,CAFbK,MAAAA;AAGAL,EAAAA,aAAa,CAAbA,MAAAA,CAHAK,IAAAA;AAIAL,EAAAA,aAAa,CAAbA,MAAAA,CAAAA,IAAAA,CALF,0BAAA;AAME;AACAA,IAAAA,aAAa,CAAbA,MAAAA,CAAAA,IAAAA,CAAAA,0BAAAA,CAAAA,OAAAA,CAA6D,CAAA,QAAA,KAAY;AACvEG,MAAAA,gBAAgB,CAAhBA,GAAAA,CAAAA,QAAAA;AADFH,KAAAA;AAGD;AACD,SAAOO,KAAK,CAALA,IAAAA,CAAP,gBAAOA,CAAP;AACD;;AAED,OAAO,MAAMJ,gBAAgB,GAAGN,gBAAzB,EAAA;;AAEP,OAAO,MAAMW,gBAAgB,GAAGL,gBAAgB,CAAhBA,MAAAA,GAAzB,CAAA,C,iLA5BEN,gB,gIA0BIM,gB,gIAEAK,gB,4kBA5Bb,gB,gIA0BaL,gB,gIAEAK,gB","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  initFeatureFlags,\n  isFeatureEnabled,\n  FeatureFlag,\n} from 'src/featureFlags';\n\nfunction getDomainsConfig() {\n  const appContainer = document.getElementById('app');\n  if (!appContainer) {\n    return [];\n  }\n\n  const bootstrapData = JSON.parse(appContainer.getAttribute('data-bootstrap'));\n  // this module is a little special, it may be loaded before index.jsx,\n  // where window.featureFlags get initialized\n  // eslint-disable-next-line camelcase\n  initFeatureFlags(bootstrapData?.common?.feature_flags);\n  const availableDomains = new Set([window.location.hostname]);\n  if (\n    isFeatureEnabled(FeatureFlag.ALLOW_DASHBOARD_DOMAIN_SHARDING) &&\n    bootstrapData &&\n    bootstrapData.common &&\n    bootstrapData.common.conf &&\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS\n  ) {\n    bootstrapData.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach(hostName => {\n      availableDomains.add(hostName);\n    });\n  }\n  return Array.from(availableDomains);\n}\n\nexport const availableDomains = getDomainsConfig();\n\nexport const allowCrossDomain = availableDomains.length > 1;\n"]},"metadata":{},"sourceType":"module"}