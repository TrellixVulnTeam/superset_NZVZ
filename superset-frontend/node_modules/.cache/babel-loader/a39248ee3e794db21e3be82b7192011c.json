{"ast":null,"code":"import _extends from \"@babel/runtime-corejs3/helpers/extends\";var _jsxFileName = \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport React from 'react';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport FilterConfigurationLink from 'src/dashboard/components/nativeFilters/FilterBar/FilterConfigurationLink';\nimport { useFilters } from 'src/dashboard/components/nativeFilters/FilterBar/state';\nimport { getFilterBarTestId } from '..';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst TitleArea = styled.h4`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > span {\n    flex-grow: 1;\n  }\n`;\nconst ActionButtons = styled.div`\n  display: grid;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n  ${({ theme }) => `padding: 0 ${theme.gridUnit * 2}px`};\n\n  .btn {\n    flex: 1;\n  }\n`;\nconst HeaderButton = styled(Button)`\n  padding: 0;\n`;\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit}px\n    ${({ theme }) => theme.gridUnit * 2}px;\n`;\nconst Header = ({ onApply, onClearAll, isApplyDisabled, dataMaskSelected, dataMaskApplied, toggleFiltersBar }) => {\n  const theme = useTheme();\n  const filters = useFilters();\n  const filterValues = Object.values(filters);\n  const canEdit = useSelector(({ dashboardInfo }) => dashboardInfo.dash_edit_perm);\n  const isClearAllDisabled = Object.values(dataMaskApplied).every((filter) => {var _dataMaskSelected$fil, _dataMaskSelected$fil2, _filter$filterState;return ((_dataMaskSelected$fil = dataMaskSelected[filter.id]) == null ? void 0 : (_dataMaskSelected$fil2 = _dataMaskSelected$fil.filterState) == null ? void 0 : _dataMaskSelected$fil2.value) === null ||\n    !dataMaskSelected[filter.id] && ((_filter$filterState = filter.filterState) == null ? void 0 : _filter$filterState.value) === null;});\n  return ___EmotionJSX(Wrapper, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 66, columnNumber: 13 } },\n  ___EmotionJSX(TitleArea, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 67, columnNumber: 7 } },\n  ___EmotionJSX(\"span\", { __self: this, __source: { fileName: _jsxFileName, lineNumber: 68, columnNumber: 9 } }, t('Filters')),\n  canEdit && ___EmotionJSX(FilterConfigurationLink, { createNewOnOpen: filterValues.length === 0, __self: this, __source: { fileName: _jsxFileName, lineNumber: 69, columnNumber: 22 } },\n  ___EmotionJSX(Icons.Edit, { \"data-test\": \"create-filter\", iconColor: theme.colors.grayscale.base, __self: this, __source: { fileName: _jsxFileName, lineNumber: 70, columnNumber: 13 } })),\n\n  ___EmotionJSX(HeaderButton, _extends({}, getFilterBarTestId('collapse-button'), { buttonStyle: \"link\", buttonSize: \"xsmall\", onClick: () => toggleFiltersBar(false), __self: this, __source: { fileName: _jsxFileName, lineNumber: 72, columnNumber: 9 } }),\n  ___EmotionJSX(Icons.Expand, { iconColor: theme.colors.grayscale.base, __self: this, __source: { fileName: _jsxFileName, lineNumber: 73, columnNumber: 11 } }))),\n\n\n  ___EmotionJSX(ActionButtons, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 76, columnNumber: 7 } },\n  ___EmotionJSX(Button, _extends({ disabled: isClearAllDisabled, buttonStyle: \"tertiary\", buttonSize: \"small\", onClick: onClearAll }, getFilterBarTestId('clear-button'), { __self: this, __source: { fileName: _jsxFileName, lineNumber: 77, columnNumber: 9 } }),\n  t('Clear all')),\n\n  ___EmotionJSX(Button, _extends({ disabled: isApplyDisabled, buttonStyle: \"primary\", htmlType: \"submit\", buttonSize: \"small\", onClick: onApply }, getFilterBarTestId('apply-button'), { __self: this, __source: { fileName: _jsxFileName, lineNumber: 80, columnNumber: 9 } }),\n  t('Apply'))));\n\n\n\n};__signature__(Header, \"useTheme{theme}\\nuseFilters{filters}\\nuseSelector{canEdit}\", () => [useTheme, useFilters, useSelector]);const _default =\nHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TitleArea, \"TitleArea\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");reactHotLoader.register(ActionButtons, \"ActionButtons\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");reactHotLoader.register(HeaderButton, \"HeaderButton\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");reactHotLoader.register(Wrapper, \"Wrapper\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");reactHotLoader.register(Header, \"Header\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");reactHotLoader.register(_default, \"default\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { styled, t, useTheme } from '@superset-ui/core';\nimport React, { FC } from 'react';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport { DataMaskState, DataMaskStateWithId } from 'src/dataMask/types';\nimport FilterConfigurationLink from 'src/dashboard/components/nativeFilters/FilterBar/FilterConfigurationLink';\nimport { useFilters } from 'src/dashboard/components/nativeFilters/FilterBar/state';\nimport { Filter } from 'src/dashboard/components/nativeFilters/types';\nimport { getFilterBarTestId } from '..';\nimport { RootState } from '../../../../types';\n\nconst TitleArea = styled.h4`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > span {\n    flex-grow: 1;\n  }\n`;\n\nconst ActionButtons = styled.div`\n  display: grid;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n  ${({ theme }) => `padding: 0 ${theme.gridUnit * 2}px`};\n\n  .btn {\n    flex: 1;\n  }\n`;\n\nconst HeaderButton = styled(Button)`\n  padding: 0;\n`;\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit}px\n    ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\ntype HeaderProps = {\n  toggleFiltersBar: (arg0: boolean) => void;\n  onApply: () => void;\n  onClearAll: () => void;\n  dataMaskSelected: DataMaskState;\n  dataMaskApplied: DataMaskStateWithId;\n  isApplyDisabled: boolean;\n};\n\nconst Header: FC<HeaderProps> = ({\n  onApply,\n  onClearAll,\n  isApplyDisabled,\n  dataMaskSelected,\n  dataMaskApplied,\n  toggleFiltersBar,\n}) => {\n  const theme = useTheme();\n  const filters = useFilters();\n  const filterValues = Object.values<Filter>(filters);\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n\n  const isClearAllDisabled = Object.values(dataMaskApplied).every(\n    filter =>\n      dataMaskSelected[filter.id]?.filterState?.value === null ||\n      (!dataMaskSelected[filter.id] && filter.filterState?.value === null),\n  );\n\n  return (\n    <Wrapper>\n      <TitleArea>\n        <span>{t('Filters')}</span>\n        {canEdit && (\n          <FilterConfigurationLink createNewOnOpen={filterValues.length === 0}>\n            <Icons.Edit\n              data-test=\"create-filter\"\n              iconColor={theme.colors.grayscale.base}\n            />\n          </FilterConfigurationLink>\n        )}\n        <HeaderButton\n          {...getFilterBarTestId('collapse-button')}\n          buttonStyle=\"link\"\n          buttonSize=\"xsmall\"\n          onClick={() => toggleFiltersBar(false)}\n        >\n          <Icons.Expand iconColor={theme.colors.grayscale.base} />\n        </HeaderButton>\n      </TitleArea>\n      <ActionButtons>\n        <Button\n          disabled={isClearAllDisabled}\n          buttonStyle=\"tertiary\"\n          buttonSize=\"small\"\n          onClick={onClearAll}\n          {...getFilterBarTestId('clear-button')}\n        >\n          {t('Clear all')}\n        </Button>\n        <Button\n          disabled={isApplyDisabled}\n          buttonStyle=\"primary\"\n          htmlType=\"submit\"\n          buttonSize=\"small\"\n          onClick={onApply}\n          {...getFilterBarTestId('apply-button')}\n        >\n          {t('Apply')}\n        </Button>\n      </ActionButtons>\n    </Wrapper>\n  );\n};\n\nexport default Header;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}