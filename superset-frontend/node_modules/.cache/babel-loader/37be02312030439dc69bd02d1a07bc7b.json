{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SupersetClient } from '@superset-ui/core';\nimport { buildV1ChartDataPayload, getExploreUrl } from '../exploreUtils';\n\nexport const FETCH_DASHBOARDS_SUCCEEDED = 'FETCH_DASHBOARDS_SUCCEEDED';\nexport function fetchDashboardsSucceeded(choices) {\n  return { type: FETCH_DASHBOARDS_SUCCEEDED, choices };\n}\n\nexport const FETCH_DASHBOARDS_FAILED = 'FETCH_DASHBOARDS_FAILED';\nexport function fetchDashboardsFailed(userId) {\n  return { type: FETCH_DASHBOARDS_FAILED, userId };\n}\n\nexport function fetchDashboards(userId) {\n  return function fetchDashboardsThunk(dispatch) {\n    return SupersetClient.get({\n      endpoint: `/dashboardasync/api/read?_flt_0_owners=${userId}` }).\n\n    then(({ json }) => {\n      const choices = json.pks.map((id, index) => ({\n        value: id,\n        label: (json.result[index] || {}).dashboard_title }));\n\n\n      return dispatch(fetchDashboardsSucceeded(choices));\n    }).\n    catch(() => dispatch(fetchDashboardsFailed(userId)));\n  };\n}\n\nexport const SAVE_SLICE_FAILED = 'SAVE_SLICE_FAILED';\nexport function saveSliceFailed() {\n  return { type: SAVE_SLICE_FAILED };\n}\nexport const SAVE_SLICE_SUCCESS = 'SAVE_SLICE_SUCCESS';\nexport function saveSliceSuccess(data) {\n  return { type: SAVE_SLICE_SUCCESS, data };\n}\n\nexport const REMOVE_SAVE_MODAL_ALERT = 'REMOVE_SAVE_MODAL_ALERT';\nexport function removeSaveModalAlert() {\n  return { type: REMOVE_SAVE_MODAL_ALERT };\n}\n\nexport function saveSlice(formData, requestParams) {\n  return (dispatch) => {\n    const url = getExploreUrl({\n      formData,\n      endpointType: 'base',\n      force: false,\n      curUrl: null,\n      requestParams });\n\n\n    // Save the query context so we can re-generate the data from Python\n    // for alerts and reports\n    const queryContext = buildV1ChartDataPayload({\n      formData,\n      force: false,\n      resultFormat: 'json',\n      resultType: 'full' });\n\n\n    return SupersetClient.post({\n      url,\n      postPayload: { form_data: formData, query_context: queryContext } }).\n\n    then((response) => {\n      dispatch(saveSliceSuccess(response.json));\n      return response.json;\n    }).\n    catch(() => dispatch(saveSliceFailed()));\n  };\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FETCH_DASHBOARDS_SUCCEEDED, \"FETCH_DASHBOARDS_SUCCEEDED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboardsSucceeded, \"fetchDashboardsSucceeded\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(FETCH_DASHBOARDS_FAILED, \"FETCH_DASHBOARDS_FAILED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboardsFailed, \"fetchDashboardsFailed\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboards, \"fetchDashboards\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(SAVE_SLICE_FAILED, \"SAVE_SLICE_FAILED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSliceFailed, \"saveSliceFailed\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(SAVE_SLICE_SUCCESS, \"SAVE_SLICE_SUCCESS\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSliceSuccess, \"saveSliceSuccess\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(REMOVE_SAVE_MODAL_ALERT, \"REMOVE_SAVE_MODAL_ALERT\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(removeSaveModalAlert, \"removeSaveModalAlert\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSlice, \"saveSlice\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(__signature__, \"__signature__\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(FETCH_DASHBOARDS_SUCCEEDED, \"FETCH_DASHBOARDS_SUCCEEDED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboardsSucceeded, \"fetchDashboardsSucceeded\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(FETCH_DASHBOARDS_FAILED, \"FETCH_DASHBOARDS_FAILED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboardsFailed, \"fetchDashboardsFailed\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(fetchDashboards, \"fetchDashboards\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(SAVE_SLICE_FAILED, \"SAVE_SLICE_FAILED\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSliceFailed, \"saveSliceFailed\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(SAVE_SLICE_SUCCESS, \"SAVE_SLICE_SUCCESS\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSliceSuccess, \"saveSliceSuccess\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(REMOVE_SAVE_MODAL_ALERT, \"REMOVE_SAVE_MODAL_ALERT\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(removeSaveModalAlert, \"removeSaveModalAlert\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");reactHotLoader.register(saveSlice, \"saveSlice\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/actions/saveModalActions.js"],"names":["FETCH_DASHBOARDS_SUCCEEDED","fetchDashboardsSucceeded","type","FETCH_DASHBOARDS_FAILED","fetchDashboardsFailed","fetchDashboards","endpoint","userId","choices","json","value","label","dispatch","SAVE_SLICE_FAILED","saveSliceFailed","SAVE_SLICE_SUCCESS","saveSliceSuccess","REMOVE_SAVE_MODAL_ALERT","removeSaveModalAlert","saveSlice","url","getExploreUrl","endpointType","force","curUrl","queryContext","buildV1ChartDataPayload","resultFormat","resultType","postPayload","form_data","query_context","response"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient } from '@superset-ui/core';\nimport { buildV1ChartDataPayload, getExploreUrl } from '../exploreUtils';\n\nexport const FETCH_DASHBOARDS_SUCCEEDED = 'FETCH_DASHBOARDS_SUCCEEDED';\nexport function fetchDashboardsSucceeded(choices) {\n  return { type: FETCH_DASHBOARDS_SUCCEEDED, choices };\n}\n\nexport const FETCH_DASHBOARDS_FAILED = 'FETCH_DASHBOARDS_FAILED';\nexport function fetchDashboardsFailed(userId) {\n  return { type: FETCH_DASHBOARDS_FAILED, userId };\n}\n\nexport function fetchDashboards(userId) {\n  return function fetchDashboardsThunk(dispatch) {\n    return SupersetClient.get({\n      endpoint: `/dashboardasync/api/read?_flt_0_owners=${userId}`,\n    })\n      .then(({ json }) => {\n        const choices = json.pks.map((id, index) => ({\n          value: id,\n          label: (json.result[index] || {}).dashboard_title,\n        }));\n\n        return dispatch(fetchDashboardsSucceeded(choices));\n      })\n      .catch(() => dispatch(fetchDashboardsFailed(userId)));\n  };\n}\n\nexport const SAVE_SLICE_FAILED = 'SAVE_SLICE_FAILED';\nexport function saveSliceFailed() {\n  return { type: SAVE_SLICE_FAILED };\n}\nexport const SAVE_SLICE_SUCCESS = 'SAVE_SLICE_SUCCESS';\nexport function saveSliceSuccess(data) {\n  return { type: SAVE_SLICE_SUCCESS, data };\n}\n\nexport const REMOVE_SAVE_MODAL_ALERT = 'REMOVE_SAVE_MODAL_ALERT';\nexport function removeSaveModalAlert() {\n  return { type: REMOVE_SAVE_MODAL_ALERT };\n}\n\nexport function saveSlice(formData, requestParams) {\n  return dispatch => {\n    const url = getExploreUrl({\n      formData,\n      endpointType: 'base',\n      force: false,\n      curUrl: null,\n      requestParams,\n    });\n\n    // Save the query context so we can re-generate the data from Python\n    // for alerts and reports\n    const queryContext = buildV1ChartDataPayload({\n      formData,\n      force: false,\n      resultFormat: 'json',\n      resultType: 'full',\n    });\n\n    return SupersetClient.post({\n      url,\n      postPayload: { form_data: formData, query_context: queryContext },\n    })\n      .then(response => {\n        dispatch(saveSliceSuccess(response.json));\n        return response.json;\n      })\n      .catch(() => dispatch(saveSliceFailed()));\n  };\n}\n"]},"metadata":{},"sourceType":"module"}