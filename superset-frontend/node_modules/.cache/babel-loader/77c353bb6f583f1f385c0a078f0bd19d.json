{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\nimport { Dropdown, Menu } from 'src/common/components';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { sliceUpdated } from 'src/explore/actions/exploreActions';\nimport ViewQueryModal from '../controls/ViewQueryModal';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  onOpenPropertiesModal: PropTypes.func,\n  onOpenInEditor: PropTypes.func,\n  chartStatus: PropTypes.string,\n  latestQueryFormData: PropTypes.object.isRequired,\n  slice: PropTypes.object };\n\n\nconst MENU_KEYS = {\n  EDIT_PROPERTIES: 'edit_properties',\n  RUN_IN_SQL_LAB: 'run_in_sql_lab',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  VIEW_QUERY: 'view_query' };\n\n\nconst ExploreAdditionalActionsMenu = (props) => {\n  const { datasource } = props.latestQueryFormData;\n  const sqlSupported = datasource && datasource.split('__')[1] === 'table';\n  const handleMenuClick = ({ key, domEvent }) => {var _slice$slice_name;\n    const { slice, onOpenInEditor, latestQueryFormData } = props;\n    switch (key) {\n      case MENU_KEYS.EDIT_PROPERTIES:\n        props.onOpenPropertiesModal();\n        break;\n      case MENU_KEYS.RUN_IN_SQL_LAB:\n        onOpenInEditor(latestQueryFormData);\n        break;\n      case MENU_KEYS.DOWNLOAD_AS_IMAGE:\n        downloadAsImage(\n        '.panel-body > .chart-container',\n        // eslint-disable-next-line camelcase\n        (_slice$slice_name = slice == null ? void 0 : slice.slice_name) != null ? _slice$slice_name : t('New chart'),\n        {},\n        true)(\n        domEvent);\n        break;\n      default:\n        break;}\n\n  };\n\n  const { slice } = props;\n  return (\n    ___EmotionJSX(Dropdown, {\n      trigger: \"click\",\n      \"data-test\": \"query-dropdown\",\n      overlay:\n      ___EmotionJSX(Menu, { onClick: handleMenuClick, selectable: false, __self: this, __source: { fileName: _jsxFileName, lineNumber: 77, columnNumber: 9 } },\n      slice &&\n      ___EmotionJSX(Menu.Item, { key: MENU_KEYS.EDIT_PROPERTIES, __self: this, __source: { fileName: _jsxFileName, lineNumber: 79, columnNumber: 13 } },\n      t('Edit properties')),\n\n\n      ___EmotionJSX(Menu.Item, { key: MENU_KEYS.VIEW_QUERY, __self: this, __source: { fileName: _jsxFileName, lineNumber: 83, columnNumber: 11 } },\n      ___EmotionJSX(ModalTrigger, {\n        triggerNode:\n        ___EmotionJSX(\"span\", { \"data-test\": \"view-query-menu-item\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 86, columnNumber: 17 } }, t('View query')),\n\n        modalTitle: t('View query'),\n        modalBody:\n        ___EmotionJSX(ViewQueryModal, {\n          latestQueryFormData: props.latestQueryFormData, __self: this, __source: { fileName: _jsxFileName, lineNumber: 90, columnNumber: 17 } }),\n\n\n        draggable: true,\n        resizable: true,\n        responsive: true, __self: this, __source: { fileName: _jsxFileName, lineNumber: 84, columnNumber: 13 } })),\n\n\n      sqlSupported &&\n      ___EmotionJSX(Menu.Item, { key: MENU_KEYS.RUN_IN_SQL_LAB, __self: this, __source: { fileName: _jsxFileName, lineNumber: 100, columnNumber: 13 } },\n      t('Run in SQL Lab')),\n\n\n      ___EmotionJSX(Menu.Item, { key: MENU_KEYS.DOWNLOAD_AS_IMAGE, __self: this, __source: { fileName: _jsxFileName, lineNumber: 104, columnNumber: 11 } },\n      t('Download as image'))), __self: this, __source: { fileName: _jsxFileName, lineNumber: 73, columnNumber: 5 } },\n\n\n\n\n    ___EmotionJSX(\"div\", {\n      role: \"button\",\n      id: \"query\",\n      tabIndex: 0,\n      className: \"btn btn-default btn-sm\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 110, columnNumber: 7 } },\n\n    ___EmotionJSX(\"i\", { role: \"img\", className: \"fa fa-bars\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 116, columnNumber: 9 } }))));\n\n\n\n};\n\nExploreAdditionalActionsMenu.propTypes = propTypes;\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ sliceUpdated }, dispatch);\n}const _default =\n\nconnect(null, mapDispatchToProps)(ExploreAdditionalActionsMenu);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(MENU_KEYS, \"MENU_KEYS\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(ExploreAdditionalActionsMenu, \"ExploreAdditionalActionsMenu\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\");reactHotLoader.register(_default, \"default\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/explore/components/ExploreAdditionalActionsMenu/index.jsx"],"names":["React","connect","bindActionCreators","PropTypes","t","Dropdown","Menu","downloadAsImage","ModalTrigger","sliceUpdated","ViewQueryModal","propTypes","onOpenPropertiesModal","func","onOpenInEditor","chartStatus","string","latestQueryFormData","object","isRequired","slice","MENU_KEYS","EDIT_PROPERTIES","RUN_IN_SQL_LAB","DOWNLOAD_AS_IMAGE","VIEW_QUERY","ExploreAdditionalActionsMenu","props","datasource","sqlSupported","split","handleMenuClick","key","domEvent","slice_name","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\nimport { Dropdown, Menu } from 'src/common/components';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { sliceUpdated } from 'src/explore/actions/exploreActions';\nimport ViewQueryModal from '../controls/ViewQueryModal';\n\nconst propTypes = {\n  onOpenPropertiesModal: PropTypes.func,\n  onOpenInEditor: PropTypes.func,\n  chartStatus: PropTypes.string,\n  latestQueryFormData: PropTypes.object.isRequired,\n  slice: PropTypes.object,\n};\n\nconst MENU_KEYS = {\n  EDIT_PROPERTIES: 'edit_properties',\n  RUN_IN_SQL_LAB: 'run_in_sql_lab',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  VIEW_QUERY: 'view_query',\n};\n\nconst ExploreAdditionalActionsMenu = props => {\n  const { datasource } = props.latestQueryFormData;\n  const sqlSupported = datasource && datasource.split('__')[1] === 'table';\n  const handleMenuClick = ({ key, domEvent }) => {\n    const { slice, onOpenInEditor, latestQueryFormData } = props;\n    switch (key) {\n      case MENU_KEYS.EDIT_PROPERTIES:\n        props.onOpenPropertiesModal();\n        break;\n      case MENU_KEYS.RUN_IN_SQL_LAB:\n        onOpenInEditor(latestQueryFormData);\n        break;\n      case MENU_KEYS.DOWNLOAD_AS_IMAGE:\n        downloadAsImage(\n          '.panel-body > .chart-container',\n          // eslint-disable-next-line camelcase\n          slice?.slice_name ?? t('New chart'),\n          {},\n          true,\n        )(domEvent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const { slice } = props;\n  return (\n    <Dropdown\n      trigger=\"click\"\n      data-test=\"query-dropdown\"\n      overlay={\n        <Menu onClick={handleMenuClick} selectable={false}>\n          {slice && (\n            <Menu.Item key={MENU_KEYS.EDIT_PROPERTIES}>\n              {t('Edit properties')}\n            </Menu.Item>\n          )}\n          <Menu.Item key={MENU_KEYS.VIEW_QUERY}>\n            <ModalTrigger\n              triggerNode={\n                <span data-test=\"view-query-menu-item\">{t('View query')}</span>\n              }\n              modalTitle={t('View query')}\n              modalBody={\n                <ViewQueryModal\n                  latestQueryFormData={props.latestQueryFormData}\n                />\n              }\n              draggable\n              resizable\n              responsive\n            />\n          </Menu.Item>\n          {sqlSupported && (\n            <Menu.Item key={MENU_KEYS.RUN_IN_SQL_LAB}>\n              {t('Run in SQL Lab')}\n            </Menu.Item>\n          )}\n          <Menu.Item key={MENU_KEYS.DOWNLOAD_AS_IMAGE}>\n            {t('Download as image')}\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      <div\n        role=\"button\"\n        id=\"query\"\n        tabIndex={0}\n        className=\"btn btn-default btn-sm\"\n      >\n        <i role=\"img\" className=\"fa fa-bars\" />\n      </div>\n    </Dropdown>\n  );\n};\n\nExploreAdditionalActionsMenu.propTypes = propTypes;\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ sliceUpdated }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(ExploreAdditionalActionsMenu);\n"]},"metadata":{},"sourceType":"module"}