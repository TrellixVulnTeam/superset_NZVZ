{"ast":null,"code":"/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport Card from 'src/components/Card';\nimport ProgressBar from 'src/components/ProgressBar';\nimport Label from 'src/components/Label';\nimport { t, useTheme } from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport TableView from 'src/components/TableView';\nimport Button from 'src/components/Button';\nimport { fDuration } from 'src/modules/dates';\nimport Icons from 'src/components/Icons';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ResultSet from '../ResultSet';\nimport ModalTrigger from '../../../components/ModalTrigger';\nimport HighlightedSql from '../HighlightedSql';\nimport { StaticPosition, verticalAlign, StyledTooltip } from './styles';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nconst propTypes = {\n  columns: PropTypes.array,\n  actions: PropTypes.object,\n  queries: PropTypes.array,\n  onUserClicked: PropTypes.func,\n  onDbClicked: PropTypes.func,\n  displayLimit: PropTypes.number.isRequired };\n\nconst defaultProps = {\n  columns: ['started', 'duration', 'rows'],\n  queries: [],\n  onUserClicked: () => {},\n  onDbClicked: () => {} };\n\n\nconst openQuery = (id) => {\n  const url = `/superset/sqllab?queryId=${id}`;\n  window.open(url);\n};\n\nconst QueryTable = (props) => {\n  const theme = useTheme();\n  const statusAttributes = {\n    success: {\n      config: {\n        icon: ___EmotionJSX(Icons.Check, { iconColor: theme.colors.success.base }),\n        label: t('Success') } },\n\n\n    failed: {\n      config: {\n        icon: ___EmotionJSX(Icons.XSmall, { iconColor: theme.colors.error.base }),\n        label: t('Failed') } },\n\n\n    stopped: {\n      config: {\n        icon: ___EmotionJSX(Icons.XSmall, { iconColor: theme.colors.error.base }),\n        label: t('Failed') } },\n\n\n    running: {\n      config: {\n        icon: ___EmotionJSX(Icons.Running, { iconColor: theme.colors.primary.base }),\n        label: t('Running') } },\n\n\n    fetching: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.primary.base }),\n        label: t('fetching') } },\n\n\n    timed_out: {\n      config: {\n        icon: ___EmotionJSX(Icons.Offline, { iconColor: theme.colors.grayscale.light1 }),\n        label: t('Offline') } },\n\n\n    scheduled: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.grayscale.base }),\n        label: t('Scheduled') } },\n\n\n    pending: {\n      config: {\n        icon: ___EmotionJSX(Icons.Queued, { iconColor: theme.colors.grayscale.base }),\n        label: t('Scheduled') } },\n\n\n    error: {\n      config: {\n        icon: ___EmotionJSX(Icons.Error, { iconColor: theme.colors.error.base }),\n        label: t('Unknown Status') } } };\n\n\n\n\n  const setHeaders = (column) => {\n    if (column === 'sql') {\n      return column.toUpperCase();\n    }\n    return column.charAt(0).toUpperCase().concat(column.slice(1));\n  };\n  const columns = useMemo(\n  () =>\n  props.columns.map((column) => ({\n    accessor: column,\n    Header: () => setHeaders(column),\n    disableSortBy: true })),\n\n  [props.columns]);\n\n\n  const user = useSelector(({ sqlLab: { user } }) => user);\n\n  const data = useMemo(() => {\n    const restoreSql = (query) => {\n      props.actions.queryEditorSetSql({ id: query.sqlEditorId }, query.sql);\n    };\n\n    const openQueryInNewTab = (query) => {\n      props.actions.cloneQueryToNewTab(query, true);\n    };\n\n    const openAsyncResults = (query, displayLimit) => {\n      props.actions.fetchQueryResults(query, displayLimit);\n    };\n\n    const clearQueryResults = (query) => {\n      props.actions.clearQueryResults(query);\n    };\n\n    const removeQuery = (query) => {\n      props.actions.removeQuery(query);\n    };\n\n    return props.queries.\n    map((query) => {\n      const q = { ...query };\n      const status = statusAttributes[q.state] || statusAttributes.error;\n\n      if (q.endDttm) {\n        q.duration = fDuration(q.startDttm, q.endDttm);\n      }\n      const time = moment(q.startDttm).format().split('T');\n      q.time =\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(\"span\", null,\n      time[0], \" \", ___EmotionJSX(\"br\", null), \" \", time[1]));\n\n\n\n      q.user =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => props.onUserClicked(q.userId) },\n\n      q.user);\n\n\n      q.db =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => props.onDbClicked(q.dbId) },\n\n      q.db);\n\n\n      q.started = moment(q.startDttm).format('HH:mm:ss');\n      q.querylink =\n      ___EmotionJSX(Button, {\n        buttonSize: \"small\",\n        buttonStyle: \"link\",\n        onClick: () => openQuery(q.queryId) },\n\n      ___EmotionJSX(\"i\", { className: \"fa fa-external-link m-r-3\" }),\n      t('Edit'));\n\n\n      q.sql =\n      ___EmotionJSX(Card, { css: [StaticPosition, process.env.NODE_ENV === \"production\" ? \"\" : \";label:q-sql;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9teV9wbHVnaW4vc3VwZXJzZXQvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL1NxbExhYi9jb21wb25lbnRzL1F1ZXJ5VGFibGUvaW5kZXguanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdNZ0IiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L215X3BsdWdpbi9zdXBlcnNldC9zdXBlcnNldC1mcm9udGVuZC9zcmMvU3FsTGFiL2NvbXBvbmVudHMvUXVlcnlUYWJsZS9pbmRleC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgQ2FyZCBmcm9tICdzcmMvY29tcG9uZW50cy9DYXJkJztcbmltcG9ydCBQcm9ncmVzc0JhciBmcm9tICdzcmMvY29tcG9uZW50cy9Qcm9ncmVzc0Jhcic7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IHsgdCwgdXNlVGhlbWUgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBUYWJsZVZpZXcgZnJvbSAnc3JjL2NvbXBvbmVudHMvVGFibGVWaWV3JztcbmltcG9ydCBCdXR0b24gZnJvbSAnc3JjL2NvbXBvbmVudHMvQnV0dG9uJztcbmltcG9ydCB7IGZEdXJhdGlvbiB9IGZyb20gJ3NyYy9tb2R1bGVzL2RhdGVzJztcbmltcG9ydCBJY29ucyBmcm9tICdzcmMvY29tcG9uZW50cy9JY29ucyc7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMvVG9vbHRpcCc7XG5pbXBvcnQgUmVzdWx0U2V0IGZyb20gJy4uL1Jlc3VsdFNldCc7XG5pbXBvcnQgTW9kYWxUcmlnZ2VyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvTW9kYWxUcmlnZ2VyJztcbmltcG9ydCBIaWdobGlnaHRlZFNxbCBmcm9tICcuLi9IaWdobGlnaHRlZFNxbCc7XG5pbXBvcnQgeyBTdGF0aWNQb3NpdGlvbiwgdmVydGljYWxBbGlnbiwgU3R5bGVkVG9vbHRpcCB9IGZyb20gJy4vc3R5bGVzJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBjb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXksXG4gIGFjdGlvbnM6IFByb3BUeXBlcy5vYmplY3QsXG4gIHF1ZXJpZXM6IFByb3BUeXBlcy5hcnJheSxcbiAgb25Vc2VyQ2xpY2tlZDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRGJDbGlja2VkOiBQcm9wVHlwZXMuZnVuYyxcbiAgZGlzcGxheUxpbWl0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG59O1xuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBjb2x1bW5zOiBbJ3N0YXJ0ZWQnLCAnZHVyYXRpb24nLCAncm93cyddLFxuICBxdWVyaWVzOiBbXSxcbiAgb25Vc2VyQ2xpY2tlZDogKCkgPT4ge30sXG4gIG9uRGJDbGlja2VkOiAoKSA9PiB7fSxcbn07XG5cbmNvbnN0IG9wZW5RdWVyeSA9IGlkID0+IHtcbiAgY29uc3QgdXJsID0gYC9zdXBlcnNldC9zcWxsYWI/cXVlcnlJZD0ke2lkfWA7XG4gIHdpbmRvdy5vcGVuKHVybCk7XG59O1xuXG5jb25zdCBRdWVyeVRhYmxlID0gcHJvcHMgPT4ge1xuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IHN0YXR1c0F0dHJpYnV0ZXMgPSB7XG4gICAgc3VjY2Vzczoge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGljb246IDxJY29ucy5DaGVjayBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5zdWNjZXNzLmJhc2V9IC8+LFxuICAgICAgICBsYWJlbDogdCgnU3VjY2VzcycpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZhaWxlZDoge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGljb246IDxJY29ucy5YU21hbGwgaWNvbkNvbG9yPXt0aGVtZS5jb2xvcnMuZXJyb3IuYmFzZX0gLz4sXG4gICAgICAgIGxhYmVsOiB0KCdGYWlsZWQnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzdG9wcGVkOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLlhTbWFsbCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5lcnJvci5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ0ZhaWxlZCcpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJ1bm5pbmc6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuUnVubmluZyBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJhc2V9IC8+LFxuICAgICAgICBsYWJlbDogdCgnUnVubmluZycpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZldGNoaW5nOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLlF1ZXVlZCBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5wcmltYXJ5LmJhc2V9IC8+LFxuICAgICAgICBsYWJlbDogdCgnZmV0Y2hpbmcnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0aW1lZF9vdXQ6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuT2ZmbGluZSBpY29uQ29sb3I9e3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQxfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ09mZmxpbmUnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzY2hlZHVsZWQ6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuUXVldWVkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ1NjaGVkdWxlZCcpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHBlbmRpbmc6IHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBpY29uOiA8SWNvbnMuUXVldWVkIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5iYXNlfSAvPixcbiAgICAgICAgbGFiZWw6IHQoJ1NjaGVkdWxlZCcpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGVycm9yOiB7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNvbjogPEljb25zLkVycm9yIGljb25Db2xvcj17dGhlbWUuY29sb3JzLmVycm9yLmJhc2V9IC8+LFxuICAgICAgICBsYWJlbDogdCgnVW5rbm93biBTdGF0dXMnKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBzZXRIZWFkZXJzID0gY29sdW1uID0+IHtcbiAgICBpZiAoY29sdW1uID09PSAnc3FsJykge1xuICAgICAgcmV0dXJuIGNvbHVtbi50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29sdW1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpLmNvbmNhdChjb2x1bW4uc2xpY2UoMSkpO1xuICB9O1xuICBjb25zdCBjb2x1bW5zID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgcHJvcHMuY29sdW1ucy5tYXAoY29sdW1uID0+ICh7XG4gICAgICAgIGFjY2Vzc29yOiBjb2x1bW4sXG4gICAgICAgIEhlYWRlcjogKCkgPT4gc2V0SGVhZGVycyhjb2x1bW4pLFxuICAgICAgICBkaXNhYmxlU29ydEJ5OiB0cnVlLFxuICAgICAgfSkpLFxuICAgIFtwcm9wcy5jb2x1bW5zXSxcbiAgKTtcblxuICBjb25zdCB1c2VyID0gdXNlU2VsZWN0b3IoKHsgc3FsTGFiOiB7IHVzZXIgfSB9KSA9PiB1c2VyKTtcblxuICBjb25zdCBkYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcmVzdG9yZVNxbCA9IHF1ZXJ5ID0+IHtcbiAgICAgIHByb3BzLmFjdGlvbnMucXVlcnlFZGl0b3JTZXRTcWwoeyBpZDogcXVlcnkuc3FsRWRpdG9ySWQgfSwgcXVlcnkuc3FsKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3BlblF1ZXJ5SW5OZXdUYWIgPSBxdWVyeSA9PiB7XG4gICAgICBwcm9wcy5hY3Rpb25zLmNsb25lUXVlcnlUb05ld1RhYihxdWVyeSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9wZW5Bc3luY1Jlc3VsdHMgPSAocXVlcnksIGRpc3BsYXlMaW1pdCkgPT4ge1xuICAgICAgcHJvcHMuYWN0aW9ucy5mZXRjaFF1ZXJ5UmVzdWx0cyhxdWVyeSwgZGlzcGxheUxpbWl0KTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xlYXJRdWVyeVJlc3VsdHMgPSBxdWVyeSA9PiB7XG4gICAgICBwcm9wcy5hY3Rpb25zLmNsZWFyUXVlcnlSZXN1bHRzKHF1ZXJ5KTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlUXVlcnkgPSBxdWVyeSA9PiB7XG4gICAgICBwcm9wcy5hY3Rpb25zLnJlbW92ZVF1ZXJ5KHF1ZXJ5KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb3BzLnF1ZXJpZXNcbiAgICAgIC5tYXAocXVlcnkgPT4ge1xuICAgICAgICBjb25zdCBxID0geyAuLi5xdWVyeSB9O1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBzdGF0dXNBdHRyaWJ1dGVzW3Euc3RhdGVdIHx8IHN0YXR1c0F0dHJpYnV0ZXMuZXJyb3I7XG5cbiAgICAgICAgaWYgKHEuZW5kRHR0bSkge1xuICAgICAgICAgIHEuZHVyYXRpb24gPSBmRHVyYXRpb24ocS5zdGFydER0dG0sIHEuZW5kRHR0bSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGltZSA9IG1vbWVudChxLnN0YXJ0RHR0bSkuZm9ybWF0KCkuc3BsaXQoJ1QnKTtcbiAgICAgICAgcS50aW1lID0gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAge3RpbWVbMF19IDxiciAvPiB7dGltZVsxXX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgcS51c2VyID0gKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGJ1dHRvblNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICBidXR0b25TdHlsZT1cImxpbmtcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcHJvcHMub25Vc2VyQ2xpY2tlZChxLnVzZXJJZCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3EudXNlcn1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKTtcbiAgICAgICAgcS5kYiA9IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJsaW5rXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHByb3BzLm9uRGJDbGlja2VkKHEuZGJJZCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3EuZGJ9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICk7XG4gICAgICAgIHEuc3RhcnRlZCA9IG1vbWVudChxLnN0YXJ0RHR0bSkuZm9ybWF0KCdISDptbTpzcycpO1xuICAgICAgICBxLnF1ZXJ5bGluayA9IChcbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJsaW5rXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9wZW5RdWVyeShxLnF1ZXJ5SWQpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWV4dGVybmFsLWxpbmsgbS1yLTNcIiAvPlxuICAgICAgICAgICAge3QoJ0VkaXQnKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgKTtcbiAgICAgICAgcS5zcWwgPSAoXG4gICAgICAgICAgPENhcmQgY3NzPXtbU3RhdGljUG9zaXRpb25dfT5cbiAgICAgICAgICAgIDxIaWdobGlnaHRlZFNxbFxuICAgICAgICAgICAgICBzcWw9e3Euc3FsfVxuICAgICAgICAgICAgICByYXdTcWw9e3EuZXhlY3V0ZWRTcWx9XG4gICAgICAgICAgICAgIHNocmlua1xuICAgICAgICAgICAgICBtYXhXaWR0aD17NjB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHEucmVzdWx0c0tleSkge1xuICAgICAgICAgIHEub3V0cHV0ID0gKFxuICAgICAgICAgICAgPE1vZGFsVHJpZ2dlclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJSZXN1bHRzTW9kYWxcIlxuICAgICAgICAgICAgICB0cmlnZ2VyTm9kZT17XG4gICAgICAgICAgICAgICAgPExhYmVsIHR5cGU9XCJpbmZvXCIgY2xhc3NOYW1lPVwicG9pbnRlclwiPlxuICAgICAgICAgICAgICAgICAge3QoJ1ZpZXcgcmVzdWx0cycpfVxuICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbW9kYWxUaXRsZT17dCgnRGF0YSBwcmV2aWV3Jyl9XG4gICAgICAgICAgICAgIGJlZm9yZU9wZW49eygpID0+IG9wZW5Bc3luY1Jlc3VsdHMocXVlcnksIHByb3BzLmRpc3BsYXlMaW1pdCl9XG4gICAgICAgICAgICAgIG9uRXhpdD17KCkgPT4gY2xlYXJRdWVyeVJlc3VsdHMocXVlcnkpfVxuICAgICAgICAgICAgICBtb2RhbEJvZHk9e1xuICAgICAgICAgICAgICAgIDxSZXN1bHRTZXRcbiAgICAgICAgICAgICAgICAgIHNob3dTcWxcbiAgICAgICAgICAgICAgICAgIHVzZXI9e3VzZXJ9XG4gICAgICAgICAgICAgICAgICBxdWVyeT17cXVlcnl9XG4gICAgICAgICAgICAgICAgICBhY3Rpb25zPXtwcm9wcy5hY3Rpb25zfVxuICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0MDB9XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5TGltaXQ9e3Byb3BzLmRpc3BsYXlMaW1pdH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlc3BvbnNpdmVcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpZiBxdWVyeSB3YXMgcnVuIHVzaW5nIGN0YXMgYW5kIGZvcmNlX2N0YXNfc2NoZW1hIHdhcyBzZXRcbiAgICAgICAgICAvLyB0ZW1wVGFibGUgd2lsbCBoYXZlIHRoZSBzY2hlbWFcbiAgICAgICAgICBjb25zdCBzY2hlbWFVc2VkID1cbiAgICAgICAgICAgIHEuY3RhcyAmJiBxLnRlbXBUYWJsZSAmJiBxLnRlbXBUYWJsZS5pbmNsdWRlcygnLicpID8gJycgOiBxLnNjaGVtYTtcbiAgICAgICAgICBxLm91dHB1dCA9IFtzY2hlbWFVc2VkLCBxLnRlbXBUYWJsZV0uZmlsdGVyKHYgPT4gdikuam9pbignLicpO1xuICAgICAgICB9XG4gICAgICAgIHEucHJvZ3Jlc3MgPVxuICAgICAgICAgIHEuc3RhdGUgPT09ICdzdWNjZXNzJyA/IChcbiAgICAgICAgICAgIDxQcm9ncmVzc0JhclxuICAgICAgICAgICAgICBwZXJjZW50PXtwYXJzZUludChxLnByb2dyZXNzLnRvRml4ZWQoMCksIDEwKX1cbiAgICAgICAgICAgICAgc3RyaXBlZFxuICAgICAgICAgICAgICBzaG93SW5mbz17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8UHJvZ3Jlc3NCYXJcbiAgICAgICAgICAgICAgcGVyY2VudD17cGFyc2VJbnQocS5wcm9ncmVzcy50b0ZpeGVkKDApLCAxMCl9XG4gICAgICAgICAgICAgIHN0cmlwZWRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgcS5zdGF0ZSA9IChcbiAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17c3RhdHVzLmNvbmZpZy5sYWJlbH0gcGxhY2VtZW50PVwiYm90dG9tXCI+XG4gICAgICAgICAgICA8c3Bhbj57c3RhdHVzLmNvbmZpZy5pY29ufTwvc3Bhbj5cbiAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICk7XG4gICAgICAgIHEuYWN0aW9ucyA9IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPFN0eWxlZFRvb2x0aXBcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVzdG9yZVNxbChxdWVyeSl9XG4gICAgICAgICAgICAgIHRvb2x0aXA9e3QoXG4gICAgICAgICAgICAgICAgJ092ZXJ3cml0ZSB0ZXh0IGluIHRoZSBlZGl0b3Igd2l0aCBhIHF1ZXJ5IG9uIHRoaXMgdGFibGUnLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbnMuRWRpdCBpY29uU2l6ZT1cInNtYWxsXCIgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkVG9vbHRpcD5cbiAgICAgICAgICAgIDxTdHlsZWRUb29sdGlwXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9wZW5RdWVyeUluTmV3VGFiKHF1ZXJ5KX1cbiAgICAgICAgICAgICAgdG9vbHRpcD17dCgnUnVuIHF1ZXJ5IGluIGEgbmV3IHRhYicpfVxuICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbnMuUGx1c0NpcmNsZU91dGxpbmVkXG4gICAgICAgICAgICAgICAgaWNvblNpemU9XCJ4LXNtYWxsXCJcbiAgICAgICAgICAgICAgICBjc3M9e3ZlcnRpY2FsQWxpZ259XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1N0eWxlZFRvb2x0aXA+XG4gICAgICAgICAgICA8U3R5bGVkVG9vbHRpcFxuICAgICAgICAgICAgICB0b29sdGlwPXt0KCdSZW1vdmUgcXVlcnkgZnJvbSBsb2cnKX1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlUXVlcnkocXVlcnkpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbnMuVHJhc2ggaWNvblNpemU9XCJ4LXNtYWxsXCIgLz5cbiAgICAgICAgICAgIDwvU3R5bGVkVG9vbHRpcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHE7XG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKTtcbiAgfSwgW3Byb3BzXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIlF1ZXJ5VGFibGVcIj5cbiAgICAgIDxUYWJsZVZpZXdcbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgZGF0YT17ZGF0YX1cbiAgICAgICAgY2xhc3NOYW1lPVwidGFibGUtY29uZGVuc2VkXCJcbiAgICAgICAgcGFnZVNpemU9ezUwfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cblF1ZXJ5VGFibGUucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuUXVlcnlUYWJsZS5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbmV4cG9ydCBkZWZhdWx0IFF1ZXJ5VGFibGU7XG4iXX0= */\"] },\n      ___EmotionJSX(HighlightedSql, {\n        sql: q.sql,\n        rawSql: q.executedSql,\n        shrink: true,\n        maxWidth: 60 }));\n\n\n\n      if (q.resultsKey) {\n        q.output =\n        ___EmotionJSX(ModalTrigger, {\n          className: \"ResultsModal\",\n          triggerNode:\n          ___EmotionJSX(Label, { type: \"info\", className: \"pointer\" },\n          t('View results')),\n\n\n          modalTitle: t('Data preview'),\n          beforeOpen: () => openAsyncResults(query, props.displayLimit),\n          onExit: () => clearQueryResults(query),\n          modalBody:\n          ___EmotionJSX(ResultSet, {\n            showSql: true,\n            user: user,\n            query: query,\n            actions: props.actions,\n            height: 400,\n            displayLimit: props.displayLimit }),\n\n\n          responsive: true });\n\n\n      } else {\n        // if query was run using ctas and force_ctas_schema was set\n        // tempTable will have the schema\n        const schemaUsed =\n        q.ctas && q.tempTable && q.tempTable.includes('.') ? '' : q.schema;\n        q.output = [schemaUsed, q.tempTable].filter((v) => v).join('.');\n      }\n      q.progress =\n      q.state === 'success' ?\n      ___EmotionJSX(ProgressBar, {\n        percent: parseInt(q.progress.toFixed(0), 10),\n        striped: true,\n        showInfo: false }) :\n\n\n      ___EmotionJSX(ProgressBar, {\n        percent: parseInt(q.progress.toFixed(0), 10),\n        striped: true });\n\n\n      q.state =\n      ___EmotionJSX(Tooltip, { title: status.config.label, placement: \"bottom\" },\n      ___EmotionJSX(\"span\", null, status.config.icon));\n\n\n      q.actions =\n      ___EmotionJSX(\"div\", null,\n      ___EmotionJSX(StyledTooltip, {\n        onClick: () => restoreSql(query),\n        tooltip: t(\n        'Overwrite text in the editor with a query on this table'),\n\n        placement: \"top\" },\n\n      ___EmotionJSX(Icons.Edit, { iconSize: \"small\" })),\n\n      ___EmotionJSX(StyledTooltip, {\n        onClick: () => openQueryInNewTab(query),\n        tooltip: t('Run query in a new tab'),\n        placement: \"top\" },\n\n      ___EmotionJSX(Icons.PlusCircleOutlined, {\n        iconSize: \"x-small\",\n        css: verticalAlign })),\n\n\n      ___EmotionJSX(StyledTooltip, {\n        tooltip: t('Remove query from log'),\n        onClick: () => removeQuery(query) },\n\n      ___EmotionJSX(Icons.Trash, { iconSize: \"x-small\" })));\n\n\n\n      return q;\n    }).\n    reverse();\n  }, [props]);\n\n  return (\n    ___EmotionJSX(\"div\", { className: \"QueryTable\" },\n    ___EmotionJSX(TableView, {\n      columns: columns,\n      data: data,\n      className: \"table-condensed\",\n      pageSize: 50 })));\n\n\n\n};\n\nQueryTable.propTypes = propTypes;\nQueryTable.defaultProps = defaultProps;\n\nexport default QueryTable;","map":null,"metadata":{},"sourceType":"module"}