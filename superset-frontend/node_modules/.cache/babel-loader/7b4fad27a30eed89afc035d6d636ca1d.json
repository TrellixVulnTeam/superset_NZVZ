{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();import \"core-js/modules/es.string.replace.js\";var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { t, supersetTheme, ThemeProvider } from '@superset-ui/core';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport throttle from 'lodash/throttle';\nimport ToastContainer from 'src/components/MessageToasts/ToastContainer';\nimport {\nLOCALSTORAGE_MAX_USAGE_KB,\nLOCALSTORAGE_WARNING_THRESHOLD,\nLOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS } from\n'src/SqlLab/constants';\nimport * as Actions from 'src/SqlLab/actions/sqlLab';\nimport TabbedSqlEditors from '../TabbedSqlEditors';\nimport QueryAutoRefresh from '../QueryAutoRefresh';\nimport QuerySearch from '../QuerySearch';import { jsx as ___EmotionJSX } from \"@emotion/react\";\n\nclass App extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hash: window.location.hash };\n\n\n    this.showLocalStorageUsageWarning = throttle(\n    this.showLocalStorageUsageWarning,\n    LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS,\n    { trailing: false });\n\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', this.onHashChanged.bind(this));\n  }\n\n  componentDidUpdate() {\n    if (\n    this.props.localStorageUsageInKilobytes >=\n    LOCALSTORAGE_WARNING_THRESHOLD * LOCALSTORAGE_MAX_USAGE_KB)\n    {\n      this.showLocalStorageUsageWarning(\n      this.props.localStorageUsageInKilobytes);\n\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('hashchange', this.onHashChanged.bind(this));\n  }\n\n  onHashChanged() {\n    this.setState({ hash: window.location.hash });\n  }\n\n  showLocalStorageUsageWarning(currentUsage) {\n    this.props.actions.addDangerToast(\n    t(\n    \"SQL Lab uses your browser's local storage to store queries and results.\" +\n    `\\n Currently, you are using ${currentUsage.toFixed(\n    2)\n    } KB out of ${LOCALSTORAGE_MAX_USAGE_KB} KB. storage space.` +\n    '\\n To keep SQL Lab from crashing, please delete some query tabs.' +\n    '\\n You can re-access these queries by using the Save feature before you delete the tab. ' +\n    'Note that you will need to close other SQL Lab windows before you do this.'));\n\n\n  }\n\n  render() {\n    let content;\n    if (this.state.hash && this.state.hash === '#search') {\n      if (isFeatureEnabled(FeatureFlag.ENABLE_REACT_CRUD_VIEWS)) {\n        return window.location.replace('/superset/sqllab/history/');\n      }\n      content =\n      ___EmotionJSX(QuerySearch, {\n        actions: this.props.actions,\n        displayLimit: this.props.common.conf.DISPLAY_MAX_ROW, __self: this, __source: { fileName: _jsxFileName, lineNumber: 95, columnNumber: 9 } });\n\n\n    } else {\n      content =\n      ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(QueryAutoRefresh, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 103, columnNumber: 11 } }),\n      ___EmotionJSX(TabbedSqlEditors, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 104, columnNumber: 11 } }));\n\n\n    }\n    return (\n      ___EmotionJSX(ThemeProvider, { theme: supersetTheme, __self: this, __source: { fileName: _jsxFileName, lineNumber: 109, columnNumber: 7 } },\n      ___EmotionJSX(\"div\", { className: \"App SqlLab\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 110, columnNumber: 9 } },\n      content,\n      ___EmotionJSX(ToastContainer, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 112, columnNumber: 11 } }))));\n\n\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nApp.propTypes = {\n  actions: PropTypes.object,\n  common: PropTypes.object,\n  localStorageUsageInKilobytes: PropTypes.number.isRequired };\n\n\nfunction mapStateToProps(state) {\n  const { common, localStorageUsageInKilobytes } = state;\n  return {\n    common,\n    localStorageUsageInKilobytes };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(Actions, dispatch) };\n\n}const _default =\n\nconnect(mapStateToProps, mapDispatchToProps)(App);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(App, \"App\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx\");reactHotLoader.register(_default, \"default\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/SqlLab/components/App/index.jsx"],"names":["React","PropTypes","bindActionCreators","connect","t","supersetTheme","ThemeProvider","FeatureFlag","isFeatureEnabled","throttle","ToastContainer","LOCALSTORAGE_MAX_USAGE_KB","LOCALSTORAGE_WARNING_THRESHOLD","LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS","Actions","TabbedSqlEditors","QueryAutoRefresh","QuerySearch","App","PureComponent","constructor","props","state","hash","window","location","showLocalStorageUsageWarning","trailing","componentDidMount","addEventListener","onHashChanged","bind","componentDidUpdate","localStorageUsageInKilobytes","componentWillUnmount","removeEventListener","setState","currentUsage","actions","addDangerToast","toFixed","render","content","ENABLE_REACT_CRUD_VIEWS","replace","common","conf","DISPLAY_MAX_ROW","propTypes","object","number","isRequired","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { t, supersetTheme, ThemeProvider } from '@superset-ui/core';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport throttle from 'lodash/throttle';\nimport ToastContainer from 'src/components/MessageToasts/ToastContainer';\nimport {\n  LOCALSTORAGE_MAX_USAGE_KB,\n  LOCALSTORAGE_WARNING_THRESHOLD,\n  LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS,\n} from 'src/SqlLab/constants';\nimport * as Actions from 'src/SqlLab/actions/sqlLab';\nimport TabbedSqlEditors from '../TabbedSqlEditors';\nimport QueryAutoRefresh from '../QueryAutoRefresh';\nimport QuerySearch from '../QuerySearch';\n\nclass App extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hash: window.location.hash,\n    };\n\n    this.showLocalStorageUsageWarning = throttle(\n      this.showLocalStorageUsageWarning,\n      LOCALSTORAGE_WARNING_MESSAGE_THROTTLE_MS,\n      { trailing: false },\n    );\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', this.onHashChanged.bind(this));\n  }\n\n  componentDidUpdate() {\n    if (\n      this.props.localStorageUsageInKilobytes >=\n      LOCALSTORAGE_WARNING_THRESHOLD * LOCALSTORAGE_MAX_USAGE_KB\n    ) {\n      this.showLocalStorageUsageWarning(\n        this.props.localStorageUsageInKilobytes,\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('hashchange', this.onHashChanged.bind(this));\n  }\n\n  onHashChanged() {\n    this.setState({ hash: window.location.hash });\n  }\n\n  showLocalStorageUsageWarning(currentUsage) {\n    this.props.actions.addDangerToast(\n      t(\n        \"SQL Lab uses your browser's local storage to store queries and results.\" +\n          `\\n Currently, you are using ${currentUsage.toFixed(\n            2,\n          )} KB out of ${LOCALSTORAGE_MAX_USAGE_KB} KB. storage space.` +\n          '\\n To keep SQL Lab from crashing, please delete some query tabs.' +\n          '\\n You can re-access these queries by using the Save feature before you delete the tab. ' +\n          'Note that you will need to close other SQL Lab windows before you do this.',\n      ),\n    );\n  }\n\n  render() {\n    let content;\n    if (this.state.hash && this.state.hash === '#search') {\n      if (isFeatureEnabled(FeatureFlag.ENABLE_REACT_CRUD_VIEWS)) {\n        return window.location.replace('/superset/sqllab/history/');\n      }\n      content = (\n        <QuerySearch\n          actions={this.props.actions}\n          displayLimit={this.props.common.conf.DISPLAY_MAX_ROW}\n        />\n      );\n    } else {\n      content = (\n        <>\n          <QueryAutoRefresh />\n          <TabbedSqlEditors />\n        </>\n      );\n    }\n    return (\n      <ThemeProvider theme={supersetTheme}>\n        <div className=\"App SqlLab\">\n          {content}\n          <ToastContainer />\n        </div>\n      </ThemeProvider>\n    );\n  }\n}\n\nApp.propTypes = {\n  actions: PropTypes.object,\n  common: PropTypes.object,\n  localStorageUsageInKilobytes: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  const { common, localStorageUsageInKilobytes } = state;\n  return {\n    common,\n    localStorageUsageInKilobytes,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(Actions, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}