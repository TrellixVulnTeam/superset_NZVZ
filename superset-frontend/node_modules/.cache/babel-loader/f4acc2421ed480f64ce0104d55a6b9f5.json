{"ast":null,"code":"import _filter from \"lodash/filter\";var _jsxFileName = \"/home/ubuntu/my_plugin/superset/superset-frontend/src/views/CRUD/welcome/ChartTable.tsx\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { useListViewResource, useChartEditModal, useFavoriteStatus } from 'src/views/CRUD/hooks';\nimport { setInLocalStorage, getFromLocalStorage } from 'src/utils/localStorageHelpers';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { useHistory } from 'react-router-dom';\nimport { TableTabTypes } from 'src/views/CRUD/types';\nimport PropertiesModal from 'src/explore/components/PropertiesModal';\nimport { CardContainer, PAGE_SIZE } from 'src/views/CRUD/utils';\nimport { HOMEPAGE_CHART_FILTER } from 'src/views/CRUD/storageKeys';\nimport { LoadingCards } from 'src/views/CRUD/welcome/Welcome';\nimport ChartCard from 'src/views/CRUD/chart/ChartCard';\nimport handleResourceExport from 'src/utils/export';\nimport Loading from 'src/components/Loading';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport SubMenu from 'src/components/Menu/SubMenu';\nimport EmptyState from './EmptyState';import { jsx as ___EmotionJSX } from \"@emotion/react\";\nfunction ChartTable({ user, addDangerToast, addSuccessToast, mine, showThumbnails, examples }) {\n  const history = useHistory();\n  const filterStore = getFromLocalStorage(HOMEPAGE_CHART_FILTER, null);\n  const initialFilter = filterStore || TableTabTypes.EXAMPLES;\n  const filteredExamples = _filter(examples, (obj) => 'viz_type' in obj);\n  const { state: { loading, resourceCollection: charts, bulkSelectEnabled }, setResourceCollection: setCharts, hasPerm, refreshData, fetchData } = useListViewResource('chart', t('chart'), addDangerToast, true, initialFilter === 'Mine' ? mine : filteredExamples, [], false);\n  const chartIds = useMemo(() => charts.map((c) => c.id), [charts]);\n  const [saveFavoriteStatus, favoriteStatus] = useFavoriteStatus('chart', chartIds, addDangerToast);\n  const { sliceCurrentlyEditing, openChartEditModal, handleChartUpdated, closeChartEditModal } = useChartEditModal(setCharts, charts);\n  const [chartFilter, setChartFilter] = useState(initialFilter);\n  const [preparingExport, setPreparingExport] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  useEffect(() => {\n    if (loaded || chartFilter === 'Favorite') {\n      getData(chartFilter);\n    }\n    setLoaded(true);\n  }, [chartFilter]);\n  const handleBulkChartExport = (chartsToExport) => {\n    const ids = chartsToExport.map(({ id }) => id);\n    handleResourceExport('chart', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n  const getFilters = (filterName) => {\n    const filters = [];\n    if (filterName === 'Mine') {\n      filters.push({\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${user == null ? void 0 : user.userId}` });\n\n    } else\n    if (filterName === 'Favorite') {\n      filters.push({\n        id: 'id',\n        operator: 'chart_is_favorite',\n        value: true });\n\n    } else\n    if (filterName === 'Examples') {\n      filters.push({\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: 0 });\n\n    }\n    return filters;\n  };\n  const getData = (filter) => fetchData({\n    pageIndex: 0,\n    pageSize: PAGE_SIZE,\n    sortBy: [\n    {\n      id: 'changed_on_delta_humanized',\n      desc: true }],\n\n\n    filters: getFilters(filter) });\n\n  const menuTabs = [\n  {\n    name: 'Favorite',\n    label: t('Favorite'),\n    onClick: () => {\n      setChartFilter(TableTabTypes.FAVORITE);\n      setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.FAVORITE);\n    } },\n\n  {\n    name: 'Mine',\n    label: t('Mine'),\n    onClick: () => {\n      setChartFilter(TableTabTypes.MINE);\n      setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.MINE);\n    } }];\n\n\n  if (examples) {\n    menuTabs.push({\n      name: 'Examples',\n      label: t('Examples'),\n      onClick: () => {\n        setChartFilter(TableTabTypes.EXAMPLES);\n        setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.EXAMPLES);\n      } });\n\n  }\n  if (loading)\n  return ___EmotionJSX(LoadingCards, { cover: showThumbnails, __self: this, __source: { fileName: _jsxFileName, lineNumber: 127, columnNumber: 16 } });\n  return ___EmotionJSX(ErrorBoundary, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 128, columnNumber: 13 } },\n  sliceCurrentlyEditing && ___EmotionJSX(PropertiesModal, { onHide: closeChartEditModal, onSave: handleChartUpdated, show: true, slice: sliceCurrentlyEditing, __self: this, __source: { fileName: _jsxFileName, lineNumber: 129, columnNumber: 34 } }),\n\n  ___EmotionJSX(SubMenu, { activeChild: chartFilter, tabs: menuTabs, buttons: [\n    {\n      name: ___EmotionJSX(React.Fragment, null,\n      ___EmotionJSX(\"i\", { className: \"fa fa-plus\", __self: this, __source: { fileName: _jsxFileName, lineNumber: 134, columnNumber: 17 } }),\n      t('Chart')),\n\n      buttonStyle: 'tertiary',\n      onClick: () => {\n        window.location.assign('/chart/add');\n      } },\n\n    {\n      name: 'View All Â»',\n      buttonStyle: 'link',\n      onClick: () => {\n        const target = chartFilter === 'Favorite' ?\n        `/chart/list/?filters=(favorite:(label:${t('Yes')},value:!t))` :\n        '/chart/list/';\n        history.push(target);\n      } }], __self: this, __source: { fileName: _jsxFileName, lineNumber: 131, columnNumber: 7 } }),\n\n\n  charts != null && charts.length ? ___EmotionJSX(CardContainer, { showThumbnails: showThumbnails, __self: this, __source: { fileName: _jsxFileName, lineNumber: 153, columnNumber: 26 } },\n  charts.map((e) => ___EmotionJSX(ChartCard, { key: `${e.id}`, openChartEditModal: openChartEditModal, chartFilter: chartFilter, chart: e, userId: user == null ? void 0 : user.userId, hasPerm: hasPerm, showThumbnails: showThumbnails, bulkSelectEnabled: bulkSelectEnabled, refreshData: refreshData, addDangerToast: addDangerToast, addSuccessToast: addSuccessToast, favoriteStatus: favoriteStatus[e.id], saveFavoriteStatus: saveFavoriteStatus, handleBulkChartExport: handleBulkChartExport, __self: this, __source: { fileName: _jsxFileName, lineNumber: 154, columnNumber: 29 } }))) :\n  ___EmotionJSX(EmptyState, { tableName: \"CHARTS\", tab: chartFilter, __self: this, __source: { fileName: _jsxFileName, lineNumber: 155, columnNumber: 30 } }),\n  preparingExport && ___EmotionJSX(Loading, { __self: this, __source: { fileName: _jsxFileName, lineNumber: 156, columnNumber: 27 } }));\n\n}__signature__(ChartTable, \"useHistory{history}\\nuseListViewResource{{ state: { loading, resourceCollection: charts, bulkSelectEnabled }, setResourceCollection: setCharts, hasPerm, refreshData, fetchData, }}\\nuseMemo{chartIds}\\nuseFavoriteStatus{[saveFavoriteStatus, favoriteStatus]}\\nuseChartEditModal{{ sliceCurrentlyEditing, openChartEditModal, handleChartUpdated, closeChartEditModal, }}\\nuseState{[chartFilter, setChartFilter](initialFilter)}\\nuseState{[preparingExport, setPreparingExport](false)}\\nuseState{[loaded, setLoaded](false)}\\nuseEffect{}\", () => [useHistory, useListViewResource, useFavoriteStatus, useChartEditModal]);const _default =\nwithToasts(ChartTable);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ChartTable, \"ChartTable\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/views/CRUD/welcome/ChartTable.tsx\");reactHotLoader.register(_default, \"default\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/views/CRUD/welcome/ChartTable.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/views/CRUD/welcome/ChartTable.tsx"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { t } from '@superset-ui/core';\nimport { filter } from 'lodash';\nimport {\n  useListViewResource,\n  useChartEditModal,\n  useFavoriteStatus,\n} from 'src/views/CRUD/hooks';\nimport {\n  setInLocalStorage,\n  getFromLocalStorage,\n} from 'src/utils/localStorageHelpers';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { useHistory } from 'react-router-dom';\nimport { TableTabTypes } from 'src/views/CRUD/types';\nimport PropertiesModal from 'src/explore/components/PropertiesModal';\nimport { User } from 'src/types/bootstrapTypes';\nimport { CardContainer, PAGE_SIZE } from 'src/views/CRUD/utils';\nimport { HOMEPAGE_CHART_FILTER } from 'src/views/CRUD/storageKeys';\nimport { LoadingCards } from 'src/views/CRUD/welcome/Welcome';\nimport ChartCard from 'src/views/CRUD/chart/ChartCard';\nimport Chart from 'src/types/Chart';\nimport handleResourceExport from 'src/utils/export';\nimport Loading from 'src/components/Loading';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport SubMenu from 'src/components/Menu/SubMenu';\nimport EmptyState from './EmptyState';\n\ninterface ChartTableProps {\n  addDangerToast: (message: string) => void;\n  addSuccessToast: (message: string) => void;\n  search: string;\n  chartFilter?: string;\n  user?: User;\n  mine: Array<any>;\n  showThumbnails: boolean;\n  examples?: Array<object>;\n}\n\nfunction ChartTable({\n  user,\n  addDangerToast,\n  addSuccessToast,\n  mine,\n  showThumbnails,\n  examples,\n}: ChartTableProps) {\n  const history = useHistory();\n  const filterStore = getFromLocalStorage(HOMEPAGE_CHART_FILTER, null);\n  const initialFilter = filterStore || TableTabTypes.EXAMPLES;\n\n  const filteredExamples = filter(examples, obj => 'viz_type' in obj);\n\n  const {\n    state: { loading, resourceCollection: charts, bulkSelectEnabled },\n    setResourceCollection: setCharts,\n    hasPerm,\n    refreshData,\n    fetchData,\n  } = useListViewResource<Chart>(\n    'chart',\n    t('chart'),\n    addDangerToast,\n    true,\n    initialFilter === 'Mine' ? mine : filteredExamples,\n    [],\n    false,\n  );\n\n  const chartIds = useMemo(() => charts.map(c => c.id), [charts]);\n  const [saveFavoriteStatus, favoriteStatus] = useFavoriteStatus(\n    'chart',\n    chartIds,\n    addDangerToast,\n  );\n  const {\n    sliceCurrentlyEditing,\n    openChartEditModal,\n    handleChartUpdated,\n    closeChartEditModal,\n  } = useChartEditModal(setCharts, charts);\n\n  const [chartFilter, setChartFilter] = useState(initialFilter);\n  const [preparingExport, setPreparingExport] = useState<boolean>(false);\n  const [loaded, setLoaded] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (loaded || chartFilter === 'Favorite') {\n      getData(chartFilter);\n    }\n    setLoaded(true);\n  }, [chartFilter]);\n\n  const handleBulkChartExport = (chartsToExport: Chart[]) => {\n    const ids = chartsToExport.map(({ id }) => id);\n    handleResourceExport('chart', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n\n  const getFilters = (filterName: string) => {\n    const filters = [];\n\n    if (filterName === 'Mine') {\n      filters.push({\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: `${user?.userId}`,\n      });\n    } else if (filterName === 'Favorite') {\n      filters.push({\n        id: 'id',\n        operator: 'chart_is_favorite',\n        value: true,\n      });\n    } else if (filterName === 'Examples') {\n      filters.push({\n        id: 'created_by',\n        operator: 'rel_o_m',\n        value: 0,\n      });\n    }\n    return filters;\n  };\n\n  const getData = (filter: string) =>\n    fetchData({\n      pageIndex: 0,\n      pageSize: PAGE_SIZE,\n      sortBy: [\n        {\n          id: 'changed_on_delta_humanized',\n          desc: true,\n        },\n      ],\n      filters: getFilters(filter),\n    });\n\n  const menuTabs = [\n    {\n      name: 'Favorite',\n      label: t('Favorite'),\n      onClick: () => {\n        setChartFilter(TableTabTypes.FAVORITE);\n        setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.FAVORITE);\n      },\n    },\n    {\n      name: 'Mine',\n      label: t('Mine'),\n      onClick: () => {\n        setChartFilter(TableTabTypes.MINE);\n        setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.MINE);\n      },\n    },\n  ];\n  if (examples) {\n    menuTabs.push({\n      name: 'Examples',\n      label: t('Examples'),\n      onClick: () => {\n        setChartFilter(TableTabTypes.EXAMPLES);\n        setInLocalStorage(HOMEPAGE_CHART_FILTER, TableTabTypes.EXAMPLES);\n      },\n    });\n  }\n\n  if (loading) return <LoadingCards cover={showThumbnails} />;\n  return (\n    <ErrorBoundary>\n      {sliceCurrentlyEditing && (\n        <PropertiesModal\n          onHide={closeChartEditModal}\n          onSave={handleChartUpdated}\n          show\n          slice={sliceCurrentlyEditing}\n        />\n      )}\n\n      <SubMenu\n        activeChild={chartFilter}\n        tabs={menuTabs}\n        buttons={[\n          {\n            name: (\n              <>\n                <i className=\"fa fa-plus\" />\n                {t('Chart')}\n              </>\n            ),\n            buttonStyle: 'tertiary',\n            onClick: () => {\n              window.location.assign('/chart/add');\n            },\n          },\n          {\n            name: 'View All Â»',\n            buttonStyle: 'link',\n            onClick: () => {\n              const target =\n                chartFilter === 'Favorite'\n                  ? `/chart/list/?filters=(favorite:(label:${t(\n                      'Yes',\n                    )},value:!t))`\n                  : '/chart/list/';\n              history.push(target);\n            },\n          },\n        ]}\n      />\n      {charts?.length ? (\n        <CardContainer showThumbnails={showThumbnails}>\n          {charts.map(e => (\n            <ChartCard\n              key={`${e.id}`}\n              openChartEditModal={openChartEditModal}\n              chartFilter={chartFilter}\n              chart={e}\n              userId={user?.userId}\n              hasPerm={hasPerm}\n              showThumbnails={showThumbnails}\n              bulkSelectEnabled={bulkSelectEnabled}\n              refreshData={refreshData}\n              addDangerToast={addDangerToast}\n              addSuccessToast={addSuccessToast}\n              favoriteStatus={favoriteStatus[e.id]}\n              saveFavoriteStatus={saveFavoriteStatus}\n              handleBulkChartExport={handleBulkChartExport}\n            />\n          ))}\n        </CardContainer>\n      ) : (\n        <EmptyState tableName=\"CHARTS\" tab={chartFilter} />\n      )}\n      {preparingExport && <Loading />}\n    </ErrorBoundary>\n  );\n}\n\nexport default withToasts(ChartTable);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}