{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport {\nSupersetClient,\ngetTimeFormatter,\nTimeFormats } from\n'@superset-ui/core';\n\n// ATTENTION: If you change any constants, make sure to also change constants.py\n\nexport const NULL_STRING = '<NULL>';\nexport const TRUE_STRING = 'TRUE';\nexport const FALSE_STRING = 'FALSE';\n\n// moment time format strings\nexport const SHORT_DATE = 'MMM D, YYYY';\nexport const SHORT_TIME = 'h:m a';\n\nconst DATETIME_FORMATTER = getTimeFormatter(TimeFormats.DATABASE_DATETIME);\n\nexport function getParamFromQuery(query, param) {\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i += 1) {\n    const pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === param) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\n\nexport function storeQuery(query) {\n  return SupersetClient.post({\n    endpoint: '/kv/store/',\n    postPayload: { data: query } }).\n  then((response) => {\n    const baseUrl = window.location.origin + window.location.pathname;\n    const url = `${baseUrl}?id=${response.json.id}`;\n    return url;\n  });\n}\n\nexport function optionLabel(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  if (opt === '') {\n    return '<empty string>';\n  }\n  if (opt === true) {\n    return '<true>';\n  }\n  if (opt === false) {\n    return '<false>';\n  }\n  if (typeof opt !== 'string' && opt.toString) {\n    return opt.toString();\n  }\n  return opt;\n}\n\nexport function optionValue(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  return opt;\n}\n\nexport function optionFromValue(opt) {\n  // From a list of options, handles special values & labels\n  return { value: optionValue(opt), label: optionLabel(opt) };\n}\n\nexport function prepareCopyToClipboardTabularData(data, columns) {\n  let result = '';\n  for (let i = 0; i < data.length; i += 1) {\n    const row = {};\n    for (let j = 0; j < columns.length; j += 1) {\n      // JavaScript does not mantain the order of a mixed set of keys (i.e integers and strings)\n      // the below function orders the keys based on the column names.\n      const key = columns[j].name || columns[j];\n      if (data[i][key]) {\n        row[j] = data[i][key];\n      } else {\n        row[j] = data[i][parseFloat(key)];\n      }\n    }\n    result += `${Object.values(row).join('\\t')}\\n`;\n  }\n  return result;\n}\n\nexport function applyFormattingToTabularData(data) {\n  if (!data || data.length === 0 || !('__timestamp' in data[0])) {\n    return data;\n  }\n  return data.map((row) => ({\n    ...row,\n    /* eslint-disable no-underscore-dangle */\n    __timestamp:\n    row.__timestamp === 0 || row.__timestamp ?\n    DATETIME_FORMATTER(new Date(row.__timestamp)) :\n    row.__timestamp\n    /* eslint-enable no-underscore-dangle */ }));\n\n}\n\nexport const noOp = () => undefined;\n\n// Detects the user's OS through the browser\nexport const detectOS = () => {\n  const { appVersion } = navigator;\n\n  // Leveraging this condition because of stackOverflow\n  // https://stackoverflow.com/questions/11219582/how-to-detect-my-browser-version-and-operating-system-using-javascript\n  if (appVersion.includes('Win')) return 'Windows';\n  if (appVersion.includes('Mac')) return 'MacOS';\n  if (appVersion.includes('X11')) return 'UNIX';\n  if (appVersion.includes('Linux')) return 'Linux';\n\n  return 'Unknown OS';\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(NULL_STRING, \"NULL_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(TRUE_STRING, \"TRUE_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(FALSE_STRING, \"FALSE_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(SHORT_DATE, \"SHORT_DATE\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(SHORT_TIME, \"SHORT_TIME\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(DATETIME_FORMATTER, \"DATETIME_FORMATTER\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamFromQuery, \"getParamFromQuery\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(storeQuery, \"storeQuery\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionLabel, \"optionLabel\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionValue, \"optionValue\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionFromValue, \"optionFromValue\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(prepareCopyToClipboardTabularData, \"prepareCopyToClipboardTabularData\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(applyFormattingToTabularData, \"applyFormattingToTabularData\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(noOp, \"noOp\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(detectOS, \"detectOS\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(__signature__, \"__signature__\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(NULL_STRING, \"NULL_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(TRUE_STRING, \"TRUE_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(FALSE_STRING, \"FALSE_STRING\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(SHORT_DATE, \"SHORT_DATE\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(SHORT_TIME, \"SHORT_TIME\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(DATETIME_FORMATTER, \"DATETIME_FORMATTER\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(getParamFromQuery, \"getParamFromQuery\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(storeQuery, \"storeQuery\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionLabel, \"optionLabel\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionValue, \"optionValue\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(optionFromValue, \"optionFromValue\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(prepareCopyToClipboardTabularData, \"prepareCopyToClipboardTabularData\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(applyFormattingToTabularData, \"applyFormattingToTabularData\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(noOp, \"noOp\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");reactHotLoader.register(detectOS, \"detectOS\", \"/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"sources":["/home/ubuntu/my_plugin/superset/superset-frontend/src/utils/common.js"],"names":["NULL_STRING","TRUE_STRING","FALSE_STRING","SHORT_DATE","SHORT_TIME","DATETIME_FORMATTER","getTimeFormatter","TimeFormats","getParamFromQuery","vars","query","i","pair","decodeURIComponent","storeQuery","endpoint","postPayload","data","baseUrl","window","url","response","id","optionLabel","opt","optionValue","optionFromValue","value","label","prepareCopyToClipboardTabularData","result","row","j","columns","key","parseFloat","Object","applyFormattingToTabularData","__timestamp","noOp","detectOS","appVersion"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  SupersetClient,\n  getTimeFormatter,\n  TimeFormats,\n} from '@superset-ui/core';\n\n// ATTENTION: If you change any constants, make sure to also change constants.py\n\nexport const NULL_STRING = '<NULL>';\nexport const TRUE_STRING = 'TRUE';\nexport const FALSE_STRING = 'FALSE';\n\n// moment time format strings\nexport const SHORT_DATE = 'MMM D, YYYY';\nexport const SHORT_TIME = 'h:m a';\n\nconst DATETIME_FORMATTER = getTimeFormatter(TimeFormats.DATABASE_DATETIME);\n\nexport function getParamFromQuery(query, param) {\n  const vars = query.split('&');\n  for (let i = 0; i < vars.length; i += 1) {\n    const pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === param) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\n\nexport function storeQuery(query) {\n  return SupersetClient.post({\n    endpoint: '/kv/store/',\n    postPayload: { data: query },\n  }).then(response => {\n    const baseUrl = window.location.origin + window.location.pathname;\n    const url = `${baseUrl}?id=${response.json.id}`;\n    return url;\n  });\n}\n\nexport function optionLabel(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  if (opt === '') {\n    return '<empty string>';\n  }\n  if (opt === true) {\n    return '<true>';\n  }\n  if (opt === false) {\n    return '<false>';\n  }\n  if (typeof opt !== 'string' && opt.toString) {\n    return opt.toString();\n  }\n  return opt;\n}\n\nexport function optionValue(opt) {\n  if (opt === null) {\n    return NULL_STRING;\n  }\n  return opt;\n}\n\nexport function optionFromValue(opt) {\n  // From a list of options, handles special values & labels\n  return { value: optionValue(opt), label: optionLabel(opt) };\n}\n\nexport function prepareCopyToClipboardTabularData(data, columns) {\n  let result = '';\n  for (let i = 0; i < data.length; i += 1) {\n    const row = {};\n    for (let j = 0; j < columns.length; j += 1) {\n      // JavaScript does not mantain the order of a mixed set of keys (i.e integers and strings)\n      // the below function orders the keys based on the column names.\n      const key = columns[j].name || columns[j];\n      if (data[i][key]) {\n        row[j] = data[i][key];\n      } else {\n        row[j] = data[i][parseFloat(key)];\n      }\n    }\n    result += `${Object.values(row).join('\\t')}\\n`;\n  }\n  return result;\n}\n\nexport function applyFormattingToTabularData(data) {\n  if (!data || data.length === 0 || !('__timestamp' in data[0])) {\n    return data;\n  }\n  return data.map(row => ({\n    ...row,\n    /* eslint-disable no-underscore-dangle */\n    __timestamp:\n      row.__timestamp === 0 || row.__timestamp\n        ? DATETIME_FORMATTER(new Date(row.__timestamp))\n        : row.__timestamp,\n    /* eslint-enable no-underscore-dangle */\n  }));\n}\n\nexport const noOp = () => undefined;\n\n// Detects the user's OS through the browser\nexport const detectOS = () => {\n  const { appVersion } = navigator;\n\n  // Leveraging this condition because of stackOverflow\n  // https://stackoverflow.com/questions/11219582/how-to-detect-my-browser-version-and-operating-system-using-javascript\n  if (appVersion.includes('Win')) return 'Windows';\n  if (appVersion.includes('Mac')) return 'MacOS';\n  if (appVersion.includes('X11')) return 'UNIX';\n  if (appVersion.includes('Linux')) return 'Linux';\n\n  return 'Unknown OS';\n};\n"]},"metadata":{},"sourceType":"module"}